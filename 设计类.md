## 设计类

### 设计推特

> 题目来源：Leetcode 355
>
> 标签：哈希表

设计一个简化版的推特(Twitter)，可以让用户实现发送推文，关注/取消关注其他用户，能够看见关注人（包括自己）的最近 10 条推文。

实现 Twitter 类：

- Twitter() 初始化简易版推特对象
- void postTweet(int userId, int tweetId) 根据给定的 tweetId 和 userId 创建一条新推文。每次调用此函数都会使用一个不同的 tweetId 。
- `List<Integer>` getNewsFeed(int userId) 检索当前用户新闻推送中最近  10 条推文的 ID 。新闻推送中的每一项都必须是由用户关注的人或者是用户自己发布的推文。推文必须 按照时间顺序由最近到最远排序 。
- void follow(int followerId, int followeeId) ID 为 followerId 的用户开始关注 ID 为 followeeId 的用户。
- void unfollow(int followerId, int followeeId) ID 为 followerId 的用户不再关注 ID 为 followeeId 的用户。



```java
class twitNode{
    int id;
    int time;
    twitNode(int id,int time){
        this.id = id;
        this.time = time;
    }
}

class Twitter {
    int time = 0;
    Map<Integer,Set<Integer>> relationalGraph ;
    Map<Integer,List<twitNode>> news ;
    public Twitter() {
        this.relationalGraph = new HashMap<>();
        this.news = new HashMap<>();
    }

    public void postTweet(int userId, int tweetId) {
        if (news.get(userId) == null){
            List<twitNode> tmp = new ArrayList<>();
            tmp.add(new twitNode(tweetId,time++));
            news.put(userId,tmp);
            return;
        }
        news.get(userId).add(new twitNode(tweetId,time++));
    }

    public List<Integer> getNewsFeed(int userId) {
        List<twitNode> News = new ArrayList<>();
        List<Integer> ans = new ArrayList<>();
        List<twitNode> t = news.get(userId);
        if(t != null){
            for (int i = 0;i < t.size();i++){
                News.add(t.get(i));
            }
        }
        Set<Integer> followed = relationalGraph.get(userId);
        if(followed != null){
            Iterator<Integer> iter = followed.iterator();
            while (iter.hasNext()){
                List<twitNode> tweets = news.get(iter.next());
                if(tweets == null) continue;
                for (int i = 0;i < tweets.size() ;i++){
                    News.add(tweets.get(i));
                }
            }
        }
        if(News.size() == 0) return ans;
        News.sort(new Comparator<twitNode>() {
            @Override
            public int compare(twitNode o1, twitNode o2) {
                return o2.time - o1.time;
            }
        });
        for (int i = 0;i < News.size();i++){
            if(i == 10){
                break;
            }
            ans.add(News.get(i).id);
            
        }
        return ans;
    }

    public void follow(int followerId, int followeeId) {
        if (relationalGraph.get(followerId) == null){
            Set<Integer> s = new HashSet<>();
            s.add(followeeId);
            relationalGraph.put(followerId,s);
            return ;
        }
        relationalGraph.get(followerId).add(followeeId);
    }

    public void unfollow(int followerId, int followeeId) {
        if (relationalGraph.get(followerId) != null){
            relationalGraph.get(followerId).remove(followeeId);
        }
    }
}
```

